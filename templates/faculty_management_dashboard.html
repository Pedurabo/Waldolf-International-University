<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Management Dashboard - Waldorf Colleges & Universities</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #e2e8f0;
        }

        .header {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(120, 119, 198, 0.3);
            padding: 20px 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.5em;
            background: linear-gradient(135deg, #00d4ff, #5b73ff, #9c27ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-text h1 {
            color: #e2e8f0;
            font-size: 1.5em;
            font-weight: 700;
        }

        .user-info {
            text-align: right;
            color: #94a3b8;
        }

        .user-name {
            font-size: 1.1em;
            font-weight: 600;
            color: #00d4ff;
        }

        .logout-btn {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, #991b1b, #7f1d1d);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .welcome-section {
            background: rgba(15, 15, 35, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .welcome-title {
            font-size: 2.5em;
            background: linear-gradient(135deg, #00d4ff, #5b73ff, #9c27ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .faculty-info {
            font-size: 1.2em;
            color: #94a3b8;
            margin-bottom: 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: rgba(15, 15, 35, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 212, 255, 0.6);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.2);
        }

        .dashboard-card:hover::before {
            left: 100%;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-icon {
            font-size: 2.5em;
            margin-right: 15px;
            background: linear-gradient(135deg, #00d4ff, #5b73ff, #9c27ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-title {
            font-size: 1.3em;
            color: #00d4ff;
            font-weight: 600;
        }

        .card-content {
            color: #cbd5e1;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            background: rgba(30, 30, 60, 0.6);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(120, 119, 198, 0.2);
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.9em;
        }

        .course-list, .student-list {
            list-style: none;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .course-item, .student-item {
            background: rgba(30, 30, 60, 0.4);
            border: 1px solid rgba(120, 119, 198, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .course-item:hover, .student-item:hover {
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(30, 30, 60, 0.6);
        }

        .course-name, .student-name {
            font-weight: 600;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .course-details, .student-details {
            color: #94a3b8;
            font-size: 0.9em;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #5b73ff);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #0099cc, #4455dd);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #475569, #334155);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #16a085, #27ae60);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #138d75, #229954);
            transform: translateY(-2px);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .quick-action {
            background: rgba(15, 15, 35, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .quick-action:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 212, 255, 0.6);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .quick-action-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #00d4ff, #5b73ff, #9c27ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .quick-action-title {
            font-weight: 600;
            color: #00d4ff;
            margin-bottom: 8px;
        }

        .quick-action-desc {
            color: #94a3b8;
            font-size: 0.9em;
        }

        .enrollment-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-left: 10px;
        }

        .full {
            background: #dc2626;
            color: white;
        }

        .available {
            background: #16a085;
            color: white;
        }

        .limited {
            background: #f39c12;
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .welcome-title {
                font-size: 2em;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard-card {
            animation: fadeIn 0.6s ease-out forwards;
        }

        .dashboard-card:nth-child(1) { animation-delay: 0.1s; }
        .dashboard-card:nth-child(2) { animation-delay: 0.2s; }
        .dashboard-card:nth-child(3) { animation-delay: 0.3s; }
        .dashboard-card:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">👨‍🏫</div>
                <div class="logo-text">
                    <h1>Faculty Management Portal</h1>
                </div>
            </div>
            <div class="user-info">
                <div class="user-name">{{ faculty.name }}</div>
                <div>{{ faculty.department }} • {{ faculty.title }}</div>
                <button class="logout-btn" onclick="window.location.href='/logout'">Logout</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1 class="welcome-title">Welcome, {{ faculty.name }}</h1>
            <div class="faculty-info">{{ faculty.title }} • {{ faculty.department }} Department</div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">{{ courses|length }}</div>
                    <div class="stat-label">Teaching Courses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ students|length }}</div>
                    <div class="stat-label">Total Students</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ faculty.office or 'N/A' }}</div>
                    <div class="stat-label">Office</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ all_faculty|length }}</div>
                    <div class="stat-label">Department Faculty</div>
                </div>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Course Management -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">📚</div>
                    <div class="card-title">My Courses</div>
                </div>
                <div class="card-content">
                    <ul class="course-list">
                        {% for course in courses %}
                        <li class="course-item" onclick="manageCourse('{{ course.id }}')">
                            <div class="course-name">{{ course.name }}</div>
                            <div class="course-details">
                                {{ course.id }} • {{ course.credits }} Credits<br>
                                {{ course.schedule }} • Room: {{ course.room }}<br>
                                Enrolled: {{ course.enrolled }}/{{ course.capacity }}
                                {% if course.enrolled >= course.capacity %}
                                    <span class="enrollment-badge full">Full</span>
                                {% elif course.enrolled >= course.capacity * 0.8 %}
                                    <span class="enrollment-badge limited">Limited</span>
                                {% else %}
                                    <span class="enrollment-badge available">Available</span>
                                {% endif %}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="addCourse()">Add New Course</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()">Manage Curriculum</button>
                    </div>
                </div>
            </div>

            <!-- Student Management -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">👥</div>
                    <div class="card-title">Students Overview</div>
                </div>
                <div class="card-content">
                    <ul class="student-list">
                        {% for student in students[:6] %}
                        <li class="student-item" onclick="viewStudent('{{ student.id }}')">
                            <div class="student-name">{{ student.name }}</div>
                            <div class="student-details">
                                {{ student.id }} • {{ student.major }}<br>
                                Year {{ student.year }} • GPA: {{ student.gpa }}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="gradeSubmission()">Submit Grades</button>
                        <button class="btn btn-secondary" onclick="viewAllStudents()">View All Students</button>
                    </div>
                </div>
            </div>

            <!-- Grading & Assessment -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">📊</div>
                    <div class="card-title">Grading Center</div>
                </div>
                <div class="card-content">
                    <p><strong>Pending Tasks:</strong></p>
                    <div style="margin: 15px 0;">
                        <div style="background: rgba(220, 38, 38, 0.2); padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                            <strong>Urgent:</strong> 12 assignments need grading
                        </div>
                        <div style="background: rgba(245, 158, 11, 0.2); padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                            <strong>Due Soon:</strong> 5 midterm exams to review
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.2); padding: 10px; border-radius: 5px;">
                            <strong>Completed:</strong> 28 grades submitted this week
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openGradebook()">Open Gradebook</button>
                        <button class="btn btn-success" onclick="createAssignment()">Create Assignment</button>
                    </div>
                </div>
            </div>

            <!-- Faculty Resources -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">🎓</div>
                    <div class="card-title">Faculty Resources</div>
                </div>
                <div class="card-content">
                    <p><strong>Professional Development:</strong></p>
                    <div style="margin: 15px 0;">
                        <ul style="margin-left: 20px; color: #94a3b8;">
                            <li>Teaching Excellence Workshop - Dec 15</li>
                            <li>Research Grant Opportunities</li>
                            <li>Faculty Senate Meeting - Dec 20</li>
                            <li>New Technology Training</li>
                            <li>Academic Conference Submissions</li>
                        </ul>
                    </div>
                    
                    <p><strong>Department Information:</strong></p>
                    <div style="margin: 15px 0; color: #94a3b8;">
                        <p>Office: {{ faculty.office or 'Not assigned' }}</p>
                        <p>Email: {{ faculty.email or 'Not available' }}</p>
                        <p>Phone: {{ faculty.phone or 'Not available' }}</p>
                        <p>Hire Date: {{ faculty.hire_date or 'Not available' }}</p>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="viewResources()">Faculty Resources</button>
                        <button class="btn btn-secondary" onclick="updateProfile()">Update Profile</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <a href="#" class="quick-action" onclick="scheduleOfficeHours()">
                <div class="quick-action-icon">⏰</div>
                <div class="quick-action-title">Office Hours</div>
                <div class="quick-action-desc">Schedule and manage student meetings</div>
            </a>
            
            <a href="#" class="quick-action" onclick="accessLibrary()">
                <div class="quick-action-icon">📖</div>
                <div class="quick-action-title">Academic Resources</div>
                <div class="quick-action-desc">Library and research databases</div>
            </a>
            
            <a href="#" class="quick-action" onclick="viewAnalytics()">
                <div class="quick-action-icon">📈</div>
                <div class="quick-action-title">Course Analytics</div>
                <div class="quick-action-desc">Student performance and attendance data</div>
            </a>
            
            <a href="#" class="quick-action" onclick="communicationCenter()">
                <div class="quick-action-icon">💬</div>
                <div class="quick-action-title">Communication</div>
                <div class="quick-action-desc">Email students and announcements</div>
            </a>
        </div>
    </div>

    <!-- Modal for displaying content -->
    <div id="facultyModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8);">
        <div class="modal-content" style="background: rgba(15, 15, 35, 0.95); margin: 5% auto; padding: 20px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 15px; width: 90%; max-width: 900px; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(120, 119, 198, 0.3); padding-bottom: 15px;">
                <h2 id="modalTitle" style="color: #00d4ff; margin: 0;"></h2>
                <button onclick="closeModal()" style="background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; padding: 5px;">&times;</button>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // Modal functionality
        function openModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('facultyModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('facultyModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('facultyModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Faculty dashboard functionality with real API calls
        function manageCourse(courseId) {
            showLoading('Loading course details...');
            fetch(`/faculty/course/${courseId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayCourseManagement(data);
                })
                .catch(error => {
                    showNotification('Error loading course data', 'error');
                    console.error('Error:', error);
                });
        }

        function addCourse() {
            const courseForm = `
                <form id="courseForm" style="color: #e2e8f0;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Course Name:</label>
                        <input type="text" name="name" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Credits:</label>
                        <input type="number" name="credits" min="1" max="6" value="3" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Capacity:</label>
                        <input type="number" name="capacity" min="10" max="100" value="30" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Schedule:</label>
                        <input type="text" name="schedule" placeholder="e.g., MWF 10:00-10:50 AM" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Room:</label>
                        <input type="text" name="room" placeholder="e.g., CS-102" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Description:</label>
                        <textarea name="description" rows="3" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; resize: vertical;"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Create Course</button>
                    <button type="button" onclick="closeModal()" class="btn btn-secondary">Cancel</button>
                </form>
            `;
            
            openModal('Add New Course', courseForm);
            
            document.getElementById('courseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                const courseData = Object.fromEntries(formData.entries());
                
                fetch('/faculty/course/add', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(courseData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showNotification(data.message, 'success');
                        closeModal();
                        location.reload(); // Refresh to show new course
                    } else {
                        showNotification(data.error || 'Error creating course', 'error');
                    }
                })
                .catch(error => {
                    showNotification('Error creating course', 'error');
                    console.error('Error:', error);
                });
            });
        }

        function manageCurriculum() {
            showLoading('Loading curriculum management...');
            fetch('/faculty/curriculum')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayCurriculumManagement(data);
                })
                .catch(error => {
                    showNotification('Error loading curriculum management', 'error');
                    console.error('Error:', error);
                });
        }

        function viewStudent(studentId) {
            showLoading('Loading student profile...');
            fetch(`/faculty/student/${studentId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayStudentProfile(data);
                })
                .catch(error => {
                    showNotification('Error loading student data', 'error');
                    console.error('Error:', error);
                });
        }

        function gradeSubmission() {
            openGradebook();
        }

        function viewAllStudents() {
            showLoading('Loading student roster...');
            fetch('/faculty/students')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayAllStudents(data);
                })
                .catch(error => {
                    showNotification('Error loading students', 'error');
                    console.error('Error:', error);
                });
        }

        function openGradebook() {
            showLoading('Loading gradebook...');
            fetch('/faculty/gradebook')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayGradebook(data);
                })
                .catch(error => {
                    showNotification('Error loading gradebook', 'error');
                    console.error('Error:', error);
                });
        }

        function createAssignment() {
            const assignmentForm = `
                <form id="assignmentForm" style="color: #e2e8f0;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Assignment Title:</label>
                        <input type="text" name="title" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Course:</label>
                        <select name="course_id" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            <option value="">Select Course</option>
                            <option value="CS101">CS101 - Introduction to Computer Science</option>
                            <option value="CS201">CS201 - Data Structures</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Assignment Type:</label>
                        <select name="type" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            <option value="Assignment">Assignment</option>
                            <option value="Quiz">Quiz</option>
                            <option value="Exam">Exam</option>
                            <option value="Project">Project</option>
                            <option value="Lab">Lab</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Due Date:</label>
                        <input type="datetime-local" name="due_date" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Points:</label>
                        <input type="number" name="points" min="1" max="1000" value="100" required style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Description:</label>
                        <textarea name="description" rows="3" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; resize: vertical;"></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00d4ff;">Instructions:</label>
                        <textarea name="instructions" rows="4" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; resize: vertical;"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Create Assignment</button>
                    <button type="button" onclick="closeModal()" class="btn btn-secondary">Cancel</button>
                </form>
            `;
            
            openModal('Create New Assignment', assignmentForm);
            
            document.getElementById('assignmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                const assignmentData = Object.fromEntries(formData.entries());
                
                fetch('/faculty/assignment/create', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(assignmentData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showNotification(data.message, 'success');
                        closeModal();
                    } else {
                        showNotification(data.error || 'Error creating assignment', 'error');
                    }
                })
                .catch(error => {
                    showNotification('Error creating assignment', 'error');
                    console.error('Error:', error);
                });
            });
        }

        function viewResources() {
            showLoading('Loading faculty resources...');
            fetch('/faculty/resources')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayFacultyResources(data);
                })
                .catch(error => {
                    showNotification('Error loading resources', 'error');
                    console.error('Error:', error);
                });
        }

        function updateProfile() {
            showLoading('Loading profile...');
            fetch('/faculty/profile')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayProfileForm(data);
                })
                .catch(error => {
                    showNotification('Error loading profile', 'error');
                    console.error('Error:', error);
                });
        }

        function scheduleOfficeHours() {
            showLoading('Loading office hours...');
            fetch('/faculty/office-hours')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayOfficeHours(data);
                })
                .catch(error => {
                    showNotification('Error loading office hours', 'error');
                    console.error('Error:', error);
                });
        }

        function accessLibrary() {
            window.open('/library_catalog', '_blank');
            showNotification('Opening library catalog in new tab...', 'info');
        }

        function viewAnalytics() {
            showLoading('Loading course analytics...');
            fetch('/faculty/analytics')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayCourseAnalytics(data);
                })
                .catch(error => {
                    showNotification('Error loading analytics', 'error');
                    console.error('Error:', error);
                });
        }

        function communicationCenter() {
            showLoading('Loading communication center...');
            fetch('/faculty/communication')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        showNotification(data.error, 'error');
                        return;
                    }
                    displayCommunicationCenter(data);
                })
                .catch(error => {
                    showNotification('Error loading communication center', 'error');
                    console.error('Error:', error);
                });
        }

        // Display functions for modal content
        function displayCourseManagement(data) {
            const course = data.course;
            const content = `
                <div style="color: #e2e8f0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <h3 style="color: #00d4ff;">${course.name} (${course.id})</h3>
                            <p><strong>Credits:</strong> ${course.credits}</p>
                            <p><strong>Schedule:</strong> ${course.schedule}</p>
                            <p><strong>Room:</strong> ${course.room}</p>
                            <p><strong>Enrollment:</strong> ${course.enrolled}/${course.capacity}</p>
                        </div>
                        <div>
                            <h4 style="color: #00d4ff;">Grade Distribution</h4>
                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <span style="background: #16a085; padding: 5px 10px; border-radius: 5px;">A: ${data.grade_distribution.A}</span>
                                <span style="background: #27ae60; padding: 5px 10px; border-radius: 5px;">B: ${data.grade_distribution.B}</span>
                                <span style="background: #f39c12; padding: 5px 10px; border-radius: 5px;">C: ${data.grade_distribution.C}</span>
                                <span style="background: #e74c3c; padding: 5px 10px; border-radius: 5px;">D: ${data.grade_distribution.D}</span>
                                <span style="background: #c0392b; padding: 5px 10px; border-radius: 5px;">F: ${data.grade_distribution.F}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Recent Assignments</h4>
                            ${data.assignments.map(a => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${a.title}</strong><br>
                                    Due: ${a.due_date} | Avg: ${a.avg_grade}%<br>
                                    Submissions: ${a.submissions}/${a.total}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Recent Attendance</h4>
                            ${data.attendance.map(a => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    ${a.date}: ${a.present} present, ${a.absent} absent (${a.percentage}%)
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal(`Course Management - ${course.name}`, content);
        }

        function displayStudentProfile(data) {
            const student = data.student;
            const content = `
                <div style="color: #e2e8f0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <h3 style="color: #00d4ff;">${student.name}</h3>
                            <p><strong>ID:</strong> ${student.id}</p>
                            <p><strong>Major:</strong> ${student.major}</p>
                            <p><strong>Year:</strong> ${student.year}</p>
                            <p><strong>GPA:</strong> ${student.gpa}</p>
                        </div>
                        <div>
                            <h4 style="color: #00d4ff;">Attendance Summary</h4>
                            <p>Total Classes: ${data.attendance.total_classes}</p>
                            <p>Attended: ${data.attendance.attended}</p>
                            <p>Attendance Rate: ${data.attendance.percentage}%</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Recent Grades</h4>
                            ${data.grades.map(g => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${g.assignment}</strong> (${g.course})<br>
                                    Grade: ${g.grade}% | Date: ${g.date}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Enrollment History</h4>
                            ${data.enrollment_history.map(e => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${e.semester}</strong><br>
                                    Courses: ${e.courses} | Credits: ${e.credits} | GPA: ${e.gpa}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal(`Student Profile - ${student.name}`, content);
        }

        function displayGradebook(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: #00d4ff;">Digital Gradebook</h3>
                        <button class="btn btn-success" onclick="submitAllGrades()">Submit Grades</button>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; background: rgba(30, 30, 60, 0.4);">
                            <thead>
                                <tr style="background: rgba(0, 212, 255, 0.2);">
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Student</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Midterm</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Quiz 1</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Quiz 2</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Lab 1</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Lab 2</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Project</th>
                                    <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Current Grade</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.grade_entries.map(entry => `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);"><strong>${entry.student_name}</strong><br><small>${entry.student_id}</small></td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments.Midterm}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments['Quiz 1']}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments['Quiz 2']}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments['Lab 1']}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments['Lab 2']}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${entry.assignments.Project}</td>
                                        <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); font-weight: bold; color: #00d4ff;">${entry.current_grade}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                        <h4 style="color: #00d4ff;">Grading Scale</h4>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px;">
                            ${data.assignment_types.map(type => `
                                <div style="text-align: center; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${type.name}</strong><br>${type.weight}%
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal('Gradebook', content);
        }

        function displayAllStudents(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: #00d4ff;">All Students</h3>
                        <div style="display: flex; gap: 10px;">
                            <select style="padding: 8px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px;">
                                <option>Filter by Major</option>
                                ${data.filters.majors.map(major => `<option>${major}</option>`).join('')}
                            </select>
                            <select style="padding: 8px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px;">
                                <option>Filter by Year</option>
                                ${data.filters.years.map(year => `<option>${year}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;">${data.statistics.total_students}</div>
                            <div>Total Students</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;">${data.statistics.students_in_my_courses}</div>
                            <div>In My Courses</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;">${data.statistics.avg_gpa}</div>
                            <div>Average GPA</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;">${data.statistics.honor_students}</div>
                            <div>Honor Students</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; max-height: 400px; overflow-y: auto;">
                        ${data.students.map(student => `
                            <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px; cursor: pointer;" onclick="viewStudent('${student.id}')">
                                <h4 style="color: #00d4ff;">${student.name}</h4>
                                <p><strong>ID:</strong> ${student.id}</p>
                                <p><strong>Major:</strong> ${student.major}</p>
                                <p><strong>Year:</strong> ${student.year}</p>
                                <p><strong>GPA:</strong> ${student.gpa}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            openModal('Student Roster', content);
        }

        function displayCourseAnalytics(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Course Analytics & Reports</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Course Performance</h4>
                            ${data.course_performance.map(course => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${course.course_name}</strong><br>
                                    Enrollment: ${course.enrollment} | Avg Grade: ${course.avg_grade}%<br>
                                    Attendance: ${course.attendance_rate}% | Satisfaction: ${course.satisfaction_score}/5
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Performance Distribution</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                <div style="text-align: center; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <div style="font-size: 20px; color: #16a085;">${data.student_performance_distribution.excellent}</div>
                                    <div>Excellent (90-100)</div>
                                </div>
                                <div style="text-align: center; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <div style="font-size: 20px; color: #27ae60;">${data.student_performance_distribution.good}</div>
                                    <div>Good (80-89)</div>
                                </div>
                                <div style="text-align: center; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <div style="font-size: 20px; color: #f39c12;">${data.student_performance_distribution.average}</div>
                                    <div>Average (70-79)</div>
                                </div>
                                <div style="text-align: center; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <div style="font-size: 20px; color: #e74c3c;">${data.student_performance_distribution.below_average}</div>
                                    <div>Below Avg (60-69)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                        <h4 style="color: #00d4ff;">Assignment Statistics</h4>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: rgba(0, 212, 255, 0.2);">
                                        <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Assignment</th>
                                        <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Average</th>
                                        <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Highest</th>
                                        <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Lowest</th>
                                        <th style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">Submissions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${data.assignment_statistics.map(assignment => `
                                        <tr>
                                            <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${assignment.name}</td>
                                            <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${assignment.avg_score}%</td>
                                            <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${assignment.highest}%</td>
                                            <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${assignment.lowest}%</td>
                                            <td style="padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3);">${assignment.submissions}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-primary" onclick="exportReport('analytics')">📊 Export Analytics Report</button>
                        <button class="btn btn-secondary" onclick="showNotification('Custom report builder coming soon!', 'info')" style="margin-left: 10px;">📈 Custom Report</button>
                    </div>
                </div>
            `;
            openModal('Course Analytics', content);
        }

        function displayFacultyResources(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Faculty Resource Center</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Teaching Materials</h4>
                            ${data.teaching_materials.map(material => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px; cursor: pointer;">
                                    📄 <strong>${material.title}</strong><br>
                                    Type: ${material.type} | Size: ${material.size}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Professional Development</h4>
                            ${data.professional_development.map(event => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    📅 <strong>${event.event}</strong><br>
                                    Date: ${event.date} | Location: ${event.location}<br>
                                    ${event.registration_required ? '⚠️ Registration Required' : '✅ Open'}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">IT Support</h4>
                            ${data.it_support.map(service => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    🔧 <strong>${service.service}</strong><br>
                                    Contact: ${service.contact}<br>
                                    Hours: ${service.hours}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Department Policies</h4>
                            ${data.department_policies.map(policy => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px; cursor: pointer;">
                                    📋 <strong>${policy.title}</strong><br>
                                    Last Updated: ${policy.last_updated}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal('Faculty Resources', content);
        }

        function displayOfficeHours(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Office Hours Management</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Current Schedule</h4>
                            ${data.current_schedule.map(schedule => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${schedule.day}</strong><br>
                                    ${schedule.start} - ${schedule.end}<br>
                                    Location: ${schedule.location}
                                </div>
                            `).join('')}
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="showNotification('Schedule editor coming soon!', 'info')">Edit Schedule</button>
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Upcoming Appointments</h4>
                            ${data.upcoming_appointments.map(appointment => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${appointment.student_name}</strong> (${appointment.student_id})<br>
                                    ${appointment.date} at ${appointment.time}<br>
                                    Topic: ${appointment.topic}<br>
                                    Status: <span style="color: ${appointment.status === 'Confirmed' ? '#16a085' : '#f39c12'}">${appointment.status}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal('Office Hours', content);
        }

        function displayCommunicationCenter(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Communication Center</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Recent Messages</h4>
                            ${data.recent_messages.map(message => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px; cursor: pointer;">
                                    <strong>${message.from}</strong><br>
                                    ${message.subject}<br>
                                    <small style="color: #94a3b8;">${message.date} | ${message.status}</small>
                                </div>
                            `).join('')}
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="showNotification('Email composer coming soon!', 'info')">Compose Message</button>
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                            <h4 style="color: #00d4ff;">Recent Announcements</h4>
                            ${data.announcements.map(announcement => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${announcement.title}</strong><br>
                                    ${announcement.content}<br>
                                    <small style="color: #94a3b8;">Course: ${announcement.course} | Views: ${announcement.views}</small>
                                </div>
                            `).join('')}
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="showNotification('Announcement creator coming soon!', 'info')">Create Announcement</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                        <h4 style="color: #00d4ff;">Email Templates</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            ${data.email_templates.map(template => `
                                <button class="btn btn-secondary" onclick="showNotification('Template editor coming soon!', 'info')">${template.name}</button>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            openModal('Communication Center', content);
        }

        function displayProfileForm(data) {
            const faculty = data.faculty;
            const content = `
                <form id="profileForm" style="color: #e2e8f0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Contact Information</h4>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px;">Office:</label>
                                <input type="text" name="office" value="${data.contact_info.office}" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px;">Phone:</label>
                                <input type="text" name="phone" value="${data.contact_info.phone}" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px;">Email:</label>
                                <input type="email" name="email" value="${data.contact_info.email}" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Academic Information</h4>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px;">Specialization:</label>
                                <input type="text" name="specialization" value="${data.academic_info.specialization}" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0;">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px;">Research Interests:</label>
                                <textarea name="research_interests" rows="3" style="width: 100%; padding: 10px; border: 1px solid rgba(120, 119, 198, 0.3); border-radius: 5px; background: rgba(30, 30, 60, 0.8); color: #e2e8f0; resize: vertical;">${data.research_interests.join(', ')}</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Update Profile</button>
                        <button type="button" onclick="closeModal()" class="btn btn-secondary">Cancel</button>
                    </div>
                </form>
            `;
            
            openModal('Update Profile', content);
            
            document.getElementById('profileForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                const profileData = Object.fromEntries(formData.entries());
                
                fetch('/faculty/profile', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(profileData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showNotification(data.message, 'success');
                        closeModal();
                    } else {
                        showNotification(data.error || 'Error updating profile', 'error');
                    }
                })
                .catch(error => {
                    showNotification('Error updating profile', 'error');
                    console.error('Error:', error);
                });
            });
        }

        // Utility functions
        function showLoading(message) {
            openModal('Loading...', `<div style="text-align: center; color: #e2e8f0; padding: 20px;"><div style="font-size: 18px; margin-bottom: 10px;">⏳ ${message}</div><div>Please wait...</div></div>`);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? '#16a085' : type === 'error' ? '#e74c3c' : '#00d4ff';
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                z-index: 9999;
                max-width: 300px;
                animation: slideInRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function submitAllGrades() {
            const gradeData = { grades: [{ student_id: 'WU001', grade: 90 }, { student_id: 'WU002', grade: 88 }] };
            
            fetch('/faculty/gradebook/submit', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(gradeData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification(data.message, 'success');
                } else {
                    showNotification(data.error || 'Error submitting grades', 'error');
                }
            })
            .catch(error => {
                showNotification('Error submitting grades', 'error');
                console.error('Error:', error);
            });
        }

        function exportReport(reportType) {
            showNotification(`📊 Exporting ${reportType} report...`, 'success');
            // In real implementation, this would download the report
            setTimeout(() => {
                showNotification(`✅ ${reportType} report exported successfully!`, 'success');
            }, 2000);
        }

        // Curriculum Management Display Functions
        function displayCurriculumManagement(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="color: #00d4ff; margin: 0;">Curriculum Management System</h2>
                        <div style="background: rgba(30, 30, 60, 0.6); padding: 10px 20px; border-radius: 8px;">
                            <strong>${data.department} Department</strong>
                        </div>
                    </div>

                    <!-- Overview Statistics -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;">${data.overview.total_courses}</div>
                            <div>Total Courses</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #16a085;">${data.overview.core_courses}</div>
                            <div>Core Courses</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #f39c12;">${data.overview.learning_outcomes}</div>
                            <div>Learning Outcomes</div>
                        </div>
                    </div>

                    <!-- Management Tools Grid -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 25px;">
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadCourseSequencing()">
                            📊 Course Sequencing<br><small>Manage course tracks and progression paths</small>
                        </button>
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadPrerequisites()">
                            🔗 Prerequisites Manager<br><small>Define and analyze course prerequisites</small>
                        </button>
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadLearningOutcomes()">
                            🎯 Learning Outcomes<br><small>Program and course learning objectives</small>
                        </button>
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadAssessmentPlanning()">
                            📝 Assessment Planning<br><small>Design assessment strategies and rubrics</small>
                        </button>
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadCurriculumMapping()">
                            🗺️ Curriculum Mapping<br><small>Visualize outcome-course relationships</small>
                        </button>
                        <button class="btn btn-primary" style="padding: 20px; font-size: 16px;" onclick="loadStandardsAlignment()">
                            ⭐ Standards Alignment<br><small>ABET and industry standards compliance</small>
                        </button>
                    </div>

                    <!-- Recent Activity and Pending Reviews -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Recent Changes</h4>
                            ${data.recent_changes.map(change => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${change.type}</strong><br>
                                    ${change.details}<br>
                                    <small style="color: #94a3b8;">${change.date} by ${change.by}</small>
                                </div>
                            `).join('')}
                        </div>

                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Pending Reviews</h4>
                            ${data.pending_reviews.map(review => `
                                <div style="margin: 10px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                    <strong>${review.course} - ${review.type}</strong><br>
                                    Due: ${review.due_date}<br>
                                    <span style="color: ${review.priority === 'High' ? '#e74c3c' : review.priority === 'Medium' ? '#f39c12' : '#27ae60'}">
                                        Priority: ${review.priority}
                                    </span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-top: 25px; text-align: center;">
                        <button class="btn btn-success" onclick="exportCurriculumReport()">📊 Export Curriculum Report</button>
                        <button class="btn btn-secondary" onclick="closeModal()" style="margin-left: 10px;">Close</button>
                    </div>
                </div>
            `;
            openModal('Curriculum Management System', content);
        }

        // Individual curriculum management functions
        function loadCourseSequencing() {
            fetch('/faculty/curriculum/sequences')
                .then(response => response.json())
                .then(data => displayCourseSequencing(data))
                .catch(error => showNotification('Error loading course sequences', 'error'));
        }

        function loadPrerequisites() {
            fetch('/faculty/curriculum/prerequisites')
                .then(response => response.json())
                .then(data => displayPrerequisites(data))
                .catch(error => showNotification('Error loading prerequisites', 'error'));
        }

        function loadLearningOutcomes() {
            fetch('/faculty/curriculum/learning-outcomes')
                .then(response => response.json())
                .then(data => displayLearningOutcomes(data))
                .catch(error => showNotification('Error loading learning outcomes', 'error'));
        }

        function loadAssessmentPlanning() {
            fetch('/faculty/curriculum/assessment-planning')
                .then(response => response.json())
                .then(data => displayAssessmentPlanning(data))
                .catch(error => showNotification('Error loading assessment planning', 'error'));
        }

        function loadCurriculumMapping() {
            fetch('/faculty/curriculum/mapping')
                .then(response => response.json())
                .then(data => displayCurriculumMapping(data))
                .catch(error => showNotification('Error loading curriculum mapping', 'error'));
        }

        function loadStandardsAlignment() {
            fetch('/faculty/curriculum/standards')
                .then(response => response.json())
                .then(data => displayStandardsAlignment(data))
                .catch(error => showNotification('Error loading standards alignment', 'error'));
        }

        function displayCourseSequencing(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Course Sequencing Management</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #00d4ff;">${data.statistics.total_tracks}</div>
                            <div>Total Tracks</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #16a085;">${data.statistics.total_sequences}</div>
                            <div>Sequences</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #f39c12;">${data.statistics.avg_track_length}</div>
                            <div>Avg Track Length</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #27ae60;">${data.statistics.completion_rate}%</div>
                            <div>Completion Rate</div>
                        </div>
                    </div>

                    ${data.sequences.map(track => `
                        <div style="margin-bottom: 20px; background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">${track.track}</h4>
                            <div style="display: flex; gap: 15px; overflow-x: auto; padding: 10px 0;">
                                ${track.courses.map((course, index) => `
                                    <div style="min-width: 200px; background: rgba(15, 15, 35, 0.6); padding: 15px; border-radius: 8px; text-align: center;">
                                        <div style="background: #00d4ff; color: #000; padding: 5px; border-radius: 5px; margin-bottom: 10px; font-weight: bold;">
                                            Semester ${course.semester}
                                        </div>
                                        <strong>${course.id}</strong><br>
                                        ${course.name}<br>
                                        ${course.prerequisites.length > 0 ? `<small style="color: #94a3b8;">Prereq: ${course.prerequisites.join(', ')}</small>` : '<small style="color: #94a3b8;">No prerequisites</small>'}
                                    </div>
                                    ${index < track.courses.length - 1 ? '<div style="display: flex; align-items: center; color: #00d4ff; font-size: 20px;">→</div>' : ''}
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Sequence editor coming soon!', 'info')">Edit Sequences</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Course Sequencing', content);
        }

        function displayPrerequisites(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Prerequisites Management</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #e74c3c;">${data.analytics.prerequisite_violations}</div>
                            <div>Violations</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #f39c12;">${data.analytics.blocked_enrollments}</div>
                            <div>Blocked Enrollments</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #27ae60;">${data.analytics.prerequisite_satisfaction_rate}%</div>
                            <div>Satisfaction Rate</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #f39c12;">${data.analytics.completion_delays}</div>
                            <div>Completion Delays</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Course Prerequisites</h4>
                            ${data.courses.map(course => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                                    <strong style="color: #00d4ff;">${course.id} - ${course.name}</strong><br>
                                    <strong>Prerequisites:</strong> ${course.prerequisites.length > 0 ? course.prerequisites.join(', ') : 'None'}<br>
                                    <strong>Required for:</strong> ${course.required_for.join(', ')}<br>
                                    <span style="color: ${course.enrollment_impact === 'High' ? '#e74c3c' : course.enrollment_impact === 'Medium' ? '#f39c12' : '#27ae60'}">
                                        Impact: ${course.enrollment_impact}
                                    </span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Prerequisite Issues</h4>
                            ${data.prerequisite_issues.map(issue => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(220, 38, 38, 0.2); border-radius: 8px; border-left: 4px solid #e74c3c;">
                                    <strong>${issue.course}</strong><br>
                                    <strong>Issue:</strong> ${issue.issue}<br>
                                    <strong>Impact:</strong> ${issue.impact}<br>
                                    <strong>Suggested Action:</strong> ${issue.suggested_action}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Prerequisites editor coming soon!', 'info')">Edit Prerequisites</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Prerequisites Management', content);
        }

        function displayLearningOutcomes(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Learning Outcomes Management</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #16a085;">${data.assessment_alignment.well_aligned}</div>
                            <div>Well Aligned</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #f39c12;">${data.assessment_alignment.partially_aligned}</div>
                            <div>Partially Aligned</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #e74c3c;">${data.assessment_alignment.poorly_aligned}</div>
                            <div>Poorly Aligned</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #95a5a6;">${data.assessment_alignment.not_assessed}</div>
                            <div>Not Assessed</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Program Learning Outcomes</h4>
                            ${data.program_outcomes.map(outcome => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                                    <strong style="color: #00d4ff;">${outcome.id}</strong><br>
                                    ${outcome.description}<br>
                                    <strong>Bloom Level:</strong> ${outcome.bloom_level}<br>
                                    <strong>Courses:</strong> ${outcome.courses_mapped.join(', ')}<br>
                                    <strong>Achievement Rate:</strong> <span style="color: ${outcome.achievement_rate >= 85 ? '#27ae60' : outcome.achievement_rate >= 70 ? '#f39c12' : '#e74c3c'}">${outcome.achievement_rate}%</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Course Learning Outcomes</h4>
                            ${Object.entries(data.course_outcomes).map(([course, outcomes]) => `
                                <div style="margin: 15px 0; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                                    <h5 style="color: #00d4ff; margin-bottom: 10px;">${course}</h5>
                                    ${outcomes.map(outcome => `
                                        <div style="margin: 5px 0; padding: 8px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                            <strong>${outcome.id}:</strong> ${outcome.description}
                                        </div>
                                    `).join('')}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Outcomes editor coming soon!', 'info')">Edit Outcomes</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Learning Outcomes Management', content);
        }

        function displayAssessmentPlanning(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Assessment Planning Management</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #16a085;">${data.assessment_analytics.completed_assessments}</div>
                            <div>Completed</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #f39c12;">${data.assessment_analytics.upcoming_assessments}</div>
                            <div>Upcoming</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #e74c3c;">${data.assessment_analytics.overdue_assessments}</div>
                            <div>Overdue</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                            <div style="font-size: 20px; color: #27ae60;">${data.assessment_analytics.average_completion_rate}%</div>
                            <div>Completion Rate</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Assessment Framework</h4>
                            <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                <h5 style="color: #16a085; margin-bottom: 10px;">Formative Assessments</h5>
                                ${data.assessment_framework.formative_assessments.map(assessment => `
                                    <div style="margin: 8px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                        <strong>${assessment.type}</strong> (${assessment.weight})<br>
                                        Frequency: ${assessment.frequency}<br>
                                        Purpose: ${assessment.purpose}
                                    </div>
                                `).join('')}
                            </div>
                            <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                                <h5 style="color: #e74c3c; margin-bottom: 10px;">Summative Assessments</h5>
                                ${data.assessment_framework.summative_assessments.map(assessment => `
                                    <div style="margin: 8px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                        <strong>${assessment.type}</strong> (${assessment.weight})<br>
                                        Frequency: ${assessment.frequency}<br>
                                        Purpose: ${assessment.purpose}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Assessment Schedule</h4>
                            ${data.assessment_schedule.map(schedule => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                                    <strong style="color: #00d4ff;">${schedule.course} - Week ${schedule.week}</strong><br>
                                    ${schedule.assessment}<br>
                                    <strong>Outcomes:</strong> ${schedule.learning_outcomes.join(', ')}<br>
                                    <span style="color: ${schedule.status === 'Completed' ? '#27ae60' : schedule.status === 'In Progress' ? '#f39c12' : '#00d4ff'}">
                                        Status: ${schedule.status}
                                    </span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div style="background: rgba(30, 30, 60, 0.4); padding: 15px; border-radius: 8px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px;">Assessment Rubrics</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                            ${data.rubrics.map(rubric => `
                                <div style="padding: 15px; background: rgba(15, 15, 35, 0.6); border-radius: 8px;">
                                    <strong>${rubric.name}</strong><br>
                                    <strong>Criteria:</strong> ${rubric.criteria.join(', ')}<br>
                                    <strong>Used in:</strong> ${rubric.used_in.join(', ')}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Assessment planner coming soon!', 'info')">Create Assessment Plan</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Assessment Planning', content);
        }

        function displayCurriculumMapping(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Curriculum Mapping & Visualization</h3>
                    
                    <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px;">Course-Outcome Matrix</h4>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse; background: rgba(15, 15, 35, 0.6);">
                                <thead>
                                    <tr style="background: rgba(0, 212, 255, 0.2);">
                                        <th style="padding: 12px; border: 1px solid rgba(120, 119, 198, 0.3);">Course</th>
                                        ${data.course_outcome_matrix.program_outcomes.map(outcome => 
                                            `<th style="padding: 12px; border: 1px solid rgba(120, 119, 198, 0.3);">${outcome}</th>`
                                        ).join('')}
                                    </tr>
                                </thead>
                                <tbody>
                                    ${data.course_outcome_matrix.mappings.map(mapping => `
                                        <tr>
                                            <td style="padding: 12px; border: 1px solid rgba(120, 119, 198, 0.3); font-weight: bold;">${mapping.course}</td>
                                            ${data.course_outcome_matrix.program_outcomes.map(outcome => {
                                                const value = mapping[outcome] || '';
                                                const bgColor = value === 'M' ? '#27ae60' : value === 'D' ? '#f39c12' : value === 'I' ? '#3498db' : 'transparent';
                                                return `<td style="padding: 12px; border: 1px solid rgba(120, 119, 198, 0.3); text-align: center; background: ${bgColor}; color: white; font-weight: bold;">${value}</td>`;
                                            }).join('')}
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        <div style="margin-top: 15px; display: flex; gap: 20px; justify-content: center;">
                            ${Object.entries(data.mapping_legend).map(([key, value]) => 
                                `<div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="background: ${key === 'M' ? '#27ae60' : key === 'D' ? '#f39c12' : '#3498db'}; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;">${key}</span>
                                    <span>${value}</span>
                                </div>`
                            ).join('')}
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Coverage Analysis</h4>
                            <div style="margin-bottom: 15px;">
                                <strong style="color: #27ae60;">Well Covered Outcomes:</strong><br>
                                ${data.coverage_analysis.outcomes_well_covered.join(', ')}
                            </div>
                            <div style="margin-bottom: 15px;">
                                <strong style="color: #e74c3c;">Under Covered Outcomes:</strong><br>
                                ${data.coverage_analysis.outcomes_under_covered.join(', ')}
                            </div>
                            <div>
                                <strong style="color: #f39c12;">Identified Gaps:</strong><br>
                                ${data.coverage_analysis.gaps_identified.map(gap => `
                                    <div style="margin: 8px 0; padding: 10px; background: rgba(15, 15, 35, 0.6); border-radius: 5px;">
                                        <strong>${gap.outcome}:</strong> ${gap.gap}<br>
                                        <em>Recommendation: ${gap.recommendation}</em>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Pathway Analysis</h4>
                            <div style="margin-bottom: 15px;">
                                <strong>Critical Path Courses:</strong><br>
                                ${data.pathway_analysis.critical_path_courses.join(', ')}
                            </div>
                            <div style="margin-bottom: 15px;">
                                <strong style="color: #e74c3c;">Bottleneck Courses:</strong><br>
                                ${data.pathway_analysis.bottleneck_courses.join(', ')}
                            </div>
                            <div>
                                <strong>Elective Distribution:</strong><br>
                                Status: ${data.pathway_analysis.elective_distribution.well_balanced ? '✅ Well Balanced' : '⚠️ Needs Review'}<br>
                                <em>${data.pathway_analysis.elective_distribution.recommendations.join(', ')}</em>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Mapping editor coming soon!', 'info')">Edit Mappings</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Curriculum Mapping', content);
        }

        function displayStandardsAlignment(data) {
            const content = `
                <div style="color: #e2e8f0;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Standards Alignment Management</h3>
                    
                    <div style="text-align: center; margin-bottom: 20px; padding: 20px; background: rgba(30, 30, 60, 0.4); border-radius: 8px;">
                        <div style="font-size: 36px; font-weight: bold; color: ${data.compliance_status.overall_compliance >= 80 ? '#27ae60' : data.compliance_status.overall_compliance >= 60 ? '#f39c12' : '#e74c3c'}">${data.compliance_status.overall_compliance}%</div>
                        <div style="font-size: 18px;">Overall Compliance Score</div>
                    </div>

                    ${Object.entries(data.accreditation_standards).map(([key, standard]) => `
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">${standard.name}</h4>
                            ${standard.outcomes ? standard.outcomes.map(outcome => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(15, 15, 35, 0.6); border-radius: 8px;">
                                    <strong>${outcome.id}:</strong> ${outcome.description}<br>
                                    <strong>Mapped Courses:</strong> ${outcome.mapped_courses.join(', ')}<br>
                                    <span style="color: ${outcome.alignment_strength === 'Strong' ? '#27ae60' : outcome.alignment_strength === 'Moderate' ? '#f39c12' : '#e74c3c'}">
                                        Alignment: ${outcome.alignment_strength}
                                    </span>
                                </div>
                            `).join('') : ''}
                            ${standard.knowledge_areas ? standard.knowledge_areas.map(area => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(15, 15, 35, 0.6); border-radius: 8px;">
                                    <strong>${area.area}</strong><br>
                                    <div style="display: flex; align-items: center; gap: 10px; margin: 8px 0;">
                                        <div style="flex: 1; background: rgba(60, 60, 80, 0.6); border-radius: 10px; height: 20px;">
                                            <div style="background: ${area.coverage >= 80 ? '#27ae60' : area.coverage >= 60 ? '#f39c12' : '#e74c3c'}; height: 100%; width: ${area.coverage}%; border-radius: 10px;"></div>
                                        </div>
                                        <span style="font-weight: bold;">${area.coverage}%</span>
                                    </div>
                                    <strong>Courses:</strong> ${area.courses.join(', ')}<br>
                                    ${area.gaps.length > 0 ? `<strong style="color: #e74c3c;">Gaps:</strong> ${area.gaps.join(', ')}` : '<span style="color: #27ae60;">✅ No gaps identified</span>'}
                                </div>
                            `).join('') : ''}
                        </div>
                    `).join('')}

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Compliance Status</h4>
                            <div style="margin-bottom: 15px;">
                                <strong style="color: #27ae60;">Strong Areas:</strong><br>
                                ${data.compliance_status.strong_areas.join(', ')}
                            </div>
                            <div>
                                <strong style="color: #e74c3c;">Improvement Needed:</strong><br>
                                ${data.compliance_status.improvement_needed.join(', ')}
                            </div>
                        </div>
                        
                        <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                            <h4 style="color: #00d4ff; margin-bottom: 15px;">Action Items</h4>
                            ${data.compliance_status.action_items.map(item => `
                                <div style="margin: 10px 0; padding: 15px; background: rgba(15, 15, 35, 0.6); border-radius: 8px; border-left: 4px solid ${item.priority === 'High' ? '#e74c3c' : item.priority === 'Medium' ? '#f39c12' : '#27ae60'};">
                                    <strong style="color: ${item.priority === 'High' ? '#e74c3c' : item.priority === 'Medium' ? '#f39c12' : '#27ae60'}">${item.priority} Priority</strong><br>
                                    ${item.item}<br>
                                    <strong>Deadline:</strong> ${item.deadline}<br>
                                    <strong>Responsible:</strong> ${item.responsible}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div style="background: rgba(30, 30, 60, 0.4); padding: 20px; border-radius: 8px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px;">Industry Standards Alignment</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h5 style="color: #16a085; margin-bottom: 10px;">Programming Languages</h5>
                                <div style="margin-bottom: 10px;">
                                    <strong>Currently Taught:</strong> ${data.industry_standards.programming_languages.taught.join(', ')}
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>Industry Demand:</strong> ${data.industry_standards.programming_languages.industry_demand.join(', ')}
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>Alignment Score:</strong> <span style="color: ${data.industry_standards.programming_languages.alignment_score >= 80 ? '#27ae60' : '#f39c12'}">${data.industry_standards.programming_languages.alignment_score}%</span>
                                </div>
                                <div>
                                    <strong>Recommendations:</strong><br>
                                    ${data.industry_standards.programming_languages.recommendations.map(rec => `<li style="margin-left: 20px;">${rec}</li>`).join('')}
                                </div>
                            </div>
                            <div>
                                <h5 style="color: #16a085; margin-bottom: 10px;">Technologies</h5>
                                <div style="margin-bottom: 10px;">
                                    <strong>Currently Taught:</strong> ${data.industry_standards.technologies.taught.join(', ')}
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>Industry Demand:</strong> ${data.industry_standards.technologies.industry_demand.join(', ')}
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>Alignment Score:</strong> <span style="color: ${data.industry_standards.technologies.alignment_score >= 80 ? '#27ae60' : '#f39c12'}">${data.industry_standards.technologies.alignment_score}%</span>
                                </div>
                                <div>
                                    <strong>Recommendations:</strong><br>
                                    ${data.industry_standards.technologies.recommendations.map(rec => `<li style="margin-left: 20px;">${rec}</li>`).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('Standards editor coming soon!', 'info')">Update Standards</button>
                        <button class="btn btn-secondary" onclick="manageCurriculum()" style="margin-left: 10px;">Back to Dashboard</button>
                    </div>
                </div>
            `;
            openModal('Standards Alignment', content);
        }

        function exportCurriculumReport() {
            showNotification('📊 Generating comprehensive curriculum report...', 'success');
            setTimeout(() => {
                showNotification('✅ Curriculum report exported successfully!', 'success');
            }, 2000);
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stats
            setTimeout(() => {
                document.querySelectorAll('.stat-number').forEach(stat => {
                    const finalValue = stat.textContent;
                    if (!isNaN(finalValue)) {
                        stat.textContent = '0';
                        animateNumber(stat, finalValue);
                    }
                });
            }, 500);
        });

        function animateNumber(element, finalValue) {
            const numValue = parseInt(finalValue);
            if (isNaN(numValue)) return;
            
            let currentValue = 0;
            const increment = Math.ceil(numValue / 30);
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= numValue) {
                    currentValue = numValue;
                    clearInterval(timer);
                }
                element.textContent = currentValue;
            }, 50);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.altKey) {
                switch(e.key) {
                    case 'c':
                        addCourse();
                        break;
                    case 'g':
                        openGradebook();
                        break;
                    case 's':
                        viewAllStudents();
                        break;
                    case 'r':
                        viewResources();
                        break;
                }
            }
        });
    </script>
</body>
</html> 